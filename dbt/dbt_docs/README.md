## Как отобразить документацию dbt-проекта

Документация dbt:
https://docs.getdbt.com/reference/commands/cmd-docs

### Сгенерировать и отобразить документацию

Это будет работать, если в вашем проекте без ошибок отрабатывает команда:

    dbt compile

Иначе придётся сначала разобраться с теми проблемами, что мешают работе dbt compile. Далее, когда вы убедились, что эта команда отрабатывает успешно, приступаем собственно к генерации:

    dbt docs generate

В папке target сформируется файл catalog.json.

Далее вызываем команду, чтобы отобразить полученную документацию, например, локально на порт 8001:

    dbt docs serve --port 8001

Выглядит всё это, например, вот так:

![cover](https://github.com/Malakhova-Natalya/Snippets/blob/main/dbt/dbt_docs/dbt_docs_generate.png)


После команды docs serve появляется ссылка, по которой нужно перейти (например http://localhost:8001)


После того, как вы перешли, нужно подождать или перезагрузить страницу, и перед вами откроется документация вашего проекта. Документация будет выглядеть как полноценный сайт. Содержимое можно смотреть 2-мя разными способами (наверху слева - **Overview**):
1. в том порядке, в котором файлы расположены у вас в проекте (**Project**) - в этом случае сохранится структура ваших папок;
2. в том порядке, как они располоежны в базе данных (**Database**) - в этом случае всё будет по алфавиту.


Что можно делать на этом сайте документации?


Например, здесь можно выбрать интересующую вас таблицу (в этом примере dataset_event_table), и нажать на "View Lineage Graph" (зелёненький значок в правом нижнем углу). 

![cover](https://github.com/Malakhova-Natalya/Snippets/blob/main/dbt/dbt_docs/http_01.png)

Откроется граф ближайшего окружения выбранной таблицы.  Если же вы хотите посмотреть более подробно, можно перейти в полноэкранный режим - View Fullscreen

![cover](https://github.com/Malakhova-Natalya/Snippets/blob/main/dbt/dbt_docs/http_02.png)

В полноэкранном режиме есть не только отображение всех таблиц, но и внизу страницы - различные настройки, которыми можно пользоваться как фильтрами:

![cover](https://github.com/Malakhova-Natalya/Snippets/blob/main/dbt/dbt_docs/http_03.png)

Всем этим можно пользоваться, пока вы не вышли в командной строке. (Press Ctrl+C to exit). Если вы вышли, то, закрыв страницу http://localhost:8001, снова на неё попасть не выйдет. Нужно будет снова в командной строке выполнить команду

    dbt docs serve --port 8001

### Детали

От адреса, по которому вы будете находиться, запуская команду docs generate, зависит, какая документация у вас получится. 

Например, у меня есть проект dbt-etlcraft-main, и в его основе несколько высокоуровневых папок. Внутри одной из таких папок (integration_tests) лежим ещё одна папка (models), в которой есть свои папки с моделями dbt.

Вот структура моего проекта:

![cover](https://github.com/Malakhova-Natalya/Snippets/blob/main/dbt/dbt_docs/folders_structure.png)


Я могу сгенерировать документацию вот так

    ~/dbt-etlcraft-main$ dbt docs serve --port 8001

    или так

    ~/dbt-etlcraft-main/integration_tests$ dbt docs serve --port 8001

И от адреса зависит, какая документация у меня получится:

![cover](https://github.com/Malakhova-Natalya/Snippets/blob/main/dbt/dbt_docs/address.png)
    
